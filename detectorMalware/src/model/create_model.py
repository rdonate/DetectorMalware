from .selection_filter import selection_filter
from .select_features_kind import select_features, split_features_and_labels
from .validation import crossvalidation
from ..misc.splits import split_Source_Trainning

def create_Model(prefix_collection, ip_Server_Mongo, db_Name,names_collections,dir_source, list_features, lenght,seed):
    feautures, labels = split_features_and_labels(select_features(ip_Server_Mongo, db_Name, prefix_collection, names_collections, list_features, lenght, dir_source, split_Source_Trainning))
    from xgboost import XGBClassifier
    model = XGBClassifier(n_estimators=100,objective='multi:softprob',booster='gbtree',seed=seed,kwargs={'num_class':9,'eval_metric':['mlogloss']})
    model = crossvalidation(seed,model,feautures,10,labels)
    model = model.fit(feautures, labels)
    return model